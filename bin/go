#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""Builds go programs using repository GOPATH."""

import os
import subprocess
import sys

from os import path

DIR_PATH = path.abspath(path.realpath(path.dirname(__file__)))
TOP_DIR_PATH = path.dirname(DIR_PATH)
GO_PATH = ';'.join([
  path.join(TOP_DIR_PATH, 'third_party', 'golang')
])


def main(args):
  env = os.environ.copy()
  env['GOPATH'] = GO_PATH
  command = ' '.join(['go'] + args[1:])
  print command
  subprocess.call(command, env=env, shell=True)

if __name__ == '__main__':
  main(sys.argv)
